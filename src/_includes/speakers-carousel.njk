

<section class="mb-32">
<div class="mb-8 md:mb-16 flex flex-col md:flex-row md:justify-between">
    <h1 class="mb-4 md:mb-0">{{ carousel.title }}</h1>
    {% if carousel.speakersPage.slug %}
        <h3 class="self-center">
            <a class="no-underline link-underline link-underline-fixed" href="{{ carousel.speakersPage.slug | absoluteUrl }}">Scoprili tutti â†’</a>
        </h3>
    {% endif %}
</div>
<div x-data="{swiper: null, index: 0}"
    x-init="swiper = initSwiper($refs)"
    class="relative w-full mx-auto flex flex-col">

        <div class="swiper-container w-full mb-12" x-ref="container">
            <div class="swiper-wrapper">
                {% for speaker in carousel.speakersCollection.items %}
                
                    <div class="swiper-slide">
                    {% if speaker.slug %}
                        <a href="{{ speaker.slug }}" class="flex flex-col shadow overflow-hidden no-underline">
                    {% else %}
                            <div class="flex flex-col shadow overflow-hidden">
                    {% endif %}
                        <div class="flex-shrink-0 mb-6">
                            <picture>
                                <source type="image/webp" srcset="{{ speaker.image.url }}?w=500&h=500&fit=thumb&fm=webp">
                                <source type="image/jpeg" srcset="{{ speaker.image.url }}?w=500&h=500&fit=thumb&q=70&fm=jpg">
                                <img class="w-full" src="{{ speaker.image.url }}?w=500&h=500&fit=thumb&q=70&fm=jpg" alt="{{ speaker.image.name }} {{ speaker.image.surname }}">
                            </picture>
                        </div>
                        <h3 class="mb-2">{{ speaker.name }}<br/>{{ speaker.surname }}</h3>
                        <p> {{ speaker.job }}</p>
                    {% if speaker.slug %}
                        </a>
                    {% else %}
                            </div>
                    {% endif %}
                    </div>
                {% endfor %}
            </div>
    </div>
    {% if carousel.speakersCollection.items.length > 2 %}
        <div class="flex justify-center items-center {% if carousel.speakersCollection.items.length < 5 %}lg:hidden{% endif %}">
            <div class="flex items-center">
                <button @click="swiper.slideTo(swiper.activeIndex-1);" class="bg-white -ml-2 lg:-ml-4 flex justify-center items-center w-10 h-10 rounded-full shadow focus:outline-none">
                    <svg class="w-6" viewBox="0 0 24 21" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10.449 -1.18467e-06L9.17939e-07 10.5L10.449 21L12.2449 19.1953L4.85131 11.7891L24 11.7891L24 9.21094L4.85131 9.21093L12.2449 1.78125L10.449 -1.18467e-06Z" fill="white"/>
                    </svg>
                </button>
            </div>
            <div class="flex items-center">
                <button @click="swiper.slideTo(swiper.activeIndex+1);" 
                        class="bg-white -mr-2 lg:-mr-4 flex justify-center items-center w-10 h-10 rounded-full shadow focus:outline-none">
                    <svg class="w-6" viewBox="0 0 24 21" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path d="M13.551 21L24 10.5L13.551 0L11.7551 1.80469L19.1487 9.21094H0V11.7891H19.1487L11.7551 19.2188L13.551 21Z" fill="white"/>
                    </svg>
                </button>
            </div>
        </div>
        {% endif %}
    </div>
</section>

<script src="/assets/js/swiper.min.js"></script>
<script>
    // speakers slider
    function initSwiper(refs){
        swiper = new Swiper(refs.container, {
            loop: false,
            slidesPerView: 1.4,
            spaceBetween: 40,
        
            breakpoints: {
                1024: {
                    slidesPerView: 3.5,
                    spaceBetween: 60,
                },
                1400: {
                    slidesPerView: 4.5,
                    spaceBetween: 60,
                },
            },
        });
        swiper.on('transitionEnd', function() {
            index=swiper.realIndex;
        });
        return swiper;
    }

</script>